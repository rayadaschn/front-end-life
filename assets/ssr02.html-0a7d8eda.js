import{_ as o,Z as l,a0 as c,F as u,a1 as r,a2 as d,X as k,Y as v,$ as m}from"./framework-5dd7fabc.js";const g={},s=l,n=c,a=u,t=r,b=d,e=m,h=k,q=v,y=s("p",null,[n("在上一篇文章"),s("a",{href:"./ssr01"},"《服务端渲染 SSR 概述》"),n(" 中，简单介绍了一下关于 Nuxt 的一些基本概念。该文接着记录一下从头创建一个 Nuxt 服务端渲染的项目过程。")],-1),f={href:"https://github.com/rayadaschn/nuxt3-demo.git",target:"_blank",rel:"noopener noreferrer"},x=e(`<p>该项目包含以下内容：</p><ul><li>Nuxt3 以 Vue3、Typescript 和 Vite 进行开发；</li><li>利用 Sass 进行 css 代码编写;</li><li>利用 Pinia 代替 Vuex 进行状态管理；</li><li>路由为文件式管理；</li><li>Git Husk 进行 代码提交验证</li><li>使用 ESlint、Prettier 和 Stylelint 进行代码检测修复；</li><li>集成 Vueuse 作为 Hooks 库（不是项目必须项）；</li></ul><h2 id="环境配置" tabindex="-1"><a class="header-anchor" href="#环境配置" aria-hidden="true">#</a> 环境配置</h2><ul><li>Node.js 当前 LTS 已为 V18;</li><li>VSCode</li><li>VSCode 插件: <ul><li>Volar</li><li>ESLint</li><li>Prettier</li><li>Stylelint</li></ul></li></ul><h2 id="安装-nuxt3" tabindex="-1"><a class="header-anchor" href="#安装-nuxt3" aria-hidden="true">#</a> 安装 Nuxt3</h2><p>本项目依旧选用 npm 作为包的管理工具，随着 node 的升级（版本应当大于 16.11），同 pnpm 等差距感觉并不大，当然依据个人喜好进行管理便可。</p><ul><li><p>官方脚手架安装：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: npx nuxi init <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>安装依赖：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>启动服务：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> run dev -- <span class="token parameter variable">-o</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>在终端中，-- 符号通常被用作分隔符来将选项和参数分离开，比如 command -- option1 --arg value。它的作用是告诉命令行解析器不要解释其后面的参数为选项，而是作为参数传递给运行的程序或脚本。 浏览器自动打开 <code>http://localhost:3000</code></p></blockquote></li></ul><p>至此，已经完成了项目的第一步。</p><h2 id="配置项目规范" tabindex="-1"><a class="header-anchor" href="#配置项目规范" aria-hidden="true">#</a> 配置项目规范</h2>`,9),S=s("a",{href:"other04"},"利用 husky 进行 git 提交前检查",-1),_=s("a",{href:"other05"},"新版 stylelint 的配置",-1),j=e(`<h3 id="eslint-和-prettier-规范-js-代码" tabindex="-1"><a class="header-anchor" href="#eslint-和-prettier-规范-js-代码" aria-hidden="true">#</a> ESLint 和 Prettier 规范 JS 代码</h3><ol><li><p>安装依赖</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> eslint prettier eslint-config-prettier eslint-plugin-prettier
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>eslint：核心包；</li><li>prettier：核心包；</li><li>eslint-config-prettier：禁用所有与格式相关的 eslint 规则，解决 prettier 与 eslint 规则冲突，确保将其放在 extends 队列最后，这样它将覆盖其他配置；</li><li>eslint-plugin-prettier：基于 prettier 代码风格的 eslint 规则，即 eslint 使用 prettier 规则来格式化代码。</li></ul></li><li><p>在根目录创建 ESLint 和 Prettier 的配置文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: npx eslint <span class="token parameter variable">--init</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>对生成的 ESlint 配置文件，添加扩展，使得以 Prettier 进行修复代码，并解决冲突。我这里为 <code>.eslintrc.cjs</code> :</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">browser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">es2021</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;eslint:recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:vue/vue3-essential&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:@typescript-eslint/recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;plugin:prettier/recommended&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;vue-eslint-parser&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 修改解析器</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">&#39;latest&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">parser</span><span class="token operator">:</span> <span class="token string">&#39;@typescript-eslint/parser&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 添加解析器</span>
    <span class="token literal-property property">sourceType</span><span class="token operator">:</span> <span class="token string">&#39;module&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;vue&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;@typescript-eslint&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;vue/multi-word-component-names&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><div class="highlight-line"> </div><br><br><br><br><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建 <code>.eslintignore</code> 文件，排除部分无需检查的代码文件：</p><div class="language-.eslintignore line-numbers-mode" data-ext=".eslintignore"><pre class="language-.eslintignore"><code>.eslintrc.cjs
.prettierrc
/node_modules/
public
dist
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>手动创建 Prettier 配置文件 <code>.prettierrc</code> ，该文件为 prettier 的默认配置文件：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// .prettierrc</span>
<span class="token punctuation">{</span>
 <span class="token string-property property">&quot;endOfLine&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lf&quot;</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;singleQuote&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;printWidth&quot;</span><span class="token operator">:</span> <span class="token number">150</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;indentStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;space&quot;</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;bracketSpacing&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
 <span class="token string-property property">&quot;useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时，已经可以用 Prettier 去修复 ESlint 检测出的不合规的代码了。可在 <code>package.json</code> 中添加 <code>scripts</code>：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint . --ext .vue,.js,.ts,.jsx,.tsx --fix&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="stylelint-规范-css" tabindex="-1"><a class="header-anchor" href="#stylelint-规范-css" aria-hidden="true">#</a> Stylelint 规范 CSS</h3><ol><li><p>安装依赖:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> stylelint stylelint-config-standard postcss-html stylelint-config-recommended-vue stylelint-config-recess-order
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 若要配置完整的 Sass, 还需要安装 stylelint-config-recommended-scss</span>
$: <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> sass stylelint-config-recommended-scss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>stylelint：核心库;</li><li>stylelint-config-standard：CSS 规范;</li><li>postcss-html：stylelint-config-recommended-vue 中依赖这个包;</li><li>stylelint-config-recommended-vue：由 stylelint （CSS 代码检查工具）提供的推荐配置之一，专门用于 Vue.js 项目的 CSS/SCSS 格式和规范规则;</li><li>stylelint-config-recess-order：规范 CSS 编写属性顺序；</li><li>stylelint-config-recommended-scss: 是有关 SCSS 最流行、最常用的规则的推荐配置方案，包含了许多推荐的 SCSS 格式和规范（如嵌套、变量命名等）。</li></ul></li></ol><p>2.安装完依赖，还需要再项目的根目录创建一个配置文件：<code>stylelint.config.{cjs,js}</code>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token comment">// stylelint.config.js</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 继承其它规则 */</span>
    <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#39;stylelint-config-standard&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 配置stylelint拓展插件</span>
      <span class="token string">&#39;stylelint-config-recommended-vue&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 配置 vue 样式格式化</span>
      <span class="token string">&#39;stylelint-config-recommended-vue/scss&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 支持 sass, 配置 vue 样式格式化</span>
      <span class="token string">&#39;stylelint-config-recess-order&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 配置stylelint css属性书写顺序插件,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">overrides</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 扫描 .vue/html 文件中的&lt;style&gt;标签内的样式</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">files</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;**/*.{vue,html}&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">customSyntax</span><span class="token operator">:</span> <span class="token string">&#39;postcss-html&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    order<span class="token operator">/</span>properties<span class="token operator">-</span>order<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;position&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;display&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;float&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;top&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;right&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;bottom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;left&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;z-index&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;overflow&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;clear&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;max-width&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;max-height&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;min-width&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;min-height&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;padding&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;padding-top&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;padding-right&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;padding-bottom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;padding-left&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-top&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-right&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-bottom&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-left&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-collapse&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-top-collapse&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-right-collapse&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-bottom-collapse&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;margin-left-collapse&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;font&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;font-family&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;font-smoothing&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;osx-font-smoothing&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;font-style&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;font-weight&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;hyphens&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;line-height&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;letter-spacing&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;word-spacing&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-align&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-decoration&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-indent&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-overflow&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-rendering&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-size-adjust&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-shadow&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;text-transform&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;word-break&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;word-wrap&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;white-space&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;vertical-align&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;list-style&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;box-shadow&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;border-radius&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;transform&quot;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="husk-代码提交检测" tabindex="-1"><a class="header-anchor" href="#husk-代码提交检测" aria-hidden="true">#</a> Husk 代码提交检测</h3><ol><li><p>安装依赖包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> husky lint-staged
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>husky：git Hook 核心包</li><li>lint-staged：用于在 Git 中拦截并检查指定的文件，以确保它们已正确格式化、规范化或测试通过。</li></ul></li><li><p>在 package.json 中加入配置基础设置：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;prepare&quot;</span><span class="token operator">:</span> <span class="token string">&quot;husky install&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lint-staged&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{vue,css,scss,html}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;stylelint --cache --fix&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;*.{js,ts,tsx,jsx,vue}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eslint --fix --ext&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在 <code>package.json</code> 中添加 prepare 脚本命令，这个命令会在 <code>npm install</code> （不带参数）之后自动执行，也就是它会在安装完依赖后自动执行 <code>husky install</code> 命令。</li><li>&quot;scripts&quot;: {&quot;lint-staged&quot;: &quot;lint-staged&quot;} 定义了通过执行 npm run lint-staged 命令来运行 lint-staged 库。</li></ul></li><li><p>创建 Git commit 的钩子文件：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: npx husky <span class="token function">install</span>
$: npx husky <span class="token function">add</span> .husky/pre-commit <span class="token string">&quot;npm run lint-staged&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>至此，关于代码的规范部分就已经全部完成了。</p><h2 id="状态管理-pinia" tabindex="-1"><a class="header-anchor" href="#状态管理-pinia" aria-hidden="true">#</a> 状态管理 Pinia</h2><p>Pinia 的配置较为简单, 一共也就两步：</p><ul><li><p>安装 Pinia 依赖：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> <span class="token function">install</span> @pinia/nuxt pinia
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>在 nuxt.config.ts 中增加 Pinia 的配置文件：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  alias<span class="token operator">:</span> <span class="token punctuation">{</span>
    pinia<span class="token operator">:</span> <span class="token string">&#39;/node_modules/@pinia/nuxt/node_modules/pinia/dist/pinia.mjs&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&#39;@pinia/nuxt&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>就可以直接在项目中使用了。</p><ol><li><p>创建 <code>store/index.ts</code> ：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// import { defineStore } from &#39;pinia&#39;; // 经过配置无需额外引入</span>

<span class="token keyword">const</span> <span class="token constant">USER_INFO</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  userName<span class="token operator">:</span> <span class="token string">&#39;Huy&#39;</span><span class="token punctuation">,</span>
  sex<span class="token operator">:</span> <span class="token string">&#39;man&#39;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useUserStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">&#39;userInfo&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token constant">USER_INFO</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    userInfo<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在页面中使用 <code>pages/index.vue</code>：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      Pinia 内容
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>
        姓名：{{ userInfo.userName }} 性别：{{ userInfo.sex }} 年龄:
        {{ userInfo.age }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useUserStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;~/store&#39;</span>
<span class="token keyword">const</span> userInfo <span class="token operator">=</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>userInfo
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="vueuse-hook-配置" tabindex="-1"><a class="header-anchor" href="#vueuse-hook-配置" aria-hidden="true">#</a> Vueuse hook 配置</h2><p>Vueuse 是 Vue 的 Hooks 库，内部封装了较多便捷的 Hooks。同 Pinia 一样，集成进项目也是两步：</p><ul><li><p>安装 vueuse 依赖：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$: <span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> @vueuse/nuxt @vueuse/core
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>在 nuxt.config.ts 中增加 Vueuse 的配置文件：</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token comment">// https://nuxt.com/docs/api/configuration/nuxt-config</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  devtools<span class="token operator">:</span> <span class="token punctuation">{</span> enabled<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  alias<span class="token operator">:</span> <span class="token punctuation">{</span>
    pinia<span class="token operator">:</span> <span class="token string">&#39;/node_modules/@pinia/nuxt/node_modules/pinia/dist/pinia.mjs&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;@vueuse/nuxt&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;@pinia/nuxt&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>就可以直接在项目中使用了。</p><p>如:</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
      Vueuse 内容
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>pos: {{ x }}, {{ y }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// Hook</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>没有报错，即引入成功。</p>`,21);function w(V,N){const p=a("ExternalLinkIcon"),i=a("RouterLink");return h(),q("div",null,[y,s("p",null,[n("项目最终配置地址可见 "),s("a",f,[n("Github"),t(p)]),n("。")]),x,s("p",null,[n("在之前的 "),t(i,{to:"/Framework/Nuxt/other01.html"},{default:b(()=>[n("代码规范和自动格式化")]),_:1}),n(" 、"),S,n(" 和 "),_,n(" 详细介绍了这块的配置需求，在此项目中，直接用上~")]),j])}const P=o(g,[["render",w],["__file","ssr02.html.vue"]]);export{P as default};
