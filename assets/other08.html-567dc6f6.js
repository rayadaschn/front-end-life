import{_ as s,X as n,Y as a,$ as e}from"./framework-5dd7fabc.js";const t={},p=e,o=n,l=a,i=p(`<p>æœ€æ–°éœ€è¦æ‰¹é‡ä¿®å¤ git åˆ†æ”¯é—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹ã€‚</p><p>éœ€æ±‚æ˜¯æœ‰å¾ˆå¤šé¡¹ç›®åˆ†æ”¯å­˜åœ¨ä¸€äº›å…±æ€§ bugï¼Œéœ€è¦æ‰¹é‡ä¿®å¤è¿™äº›åˆ†æ”¯ã€‚æ¯ä¸ªåˆ†æ”¯éƒ½ <code>cherry-pick</code> æˆ–è€… <code>merge</code> çš„è¯åˆå¤ªè´¹æ—¶é—´ã€‚å› æ­¤æœ‰äº†è¿™ä¸ªè„šæœ¬å®ç°ï¼Œé¡ºä¾¿ä¹Ÿå­¦ä¹ ä¸€ä¸‹ bash çš„ä¸€äº›è¯­æ³•ã€‚</p><p>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹,æœ‰åˆå¹¶è¿›åº¦æ¡ã€çŠ¶æ€è¡¨æ ¼ç­‰æç¤ºè¾“å‡ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
        ğŸŒ¿ Starting the Merge Process
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
<span class="token punctuation">[</span><span class="token comment">#############                           ]  33% âœ Switching to feature/branch1...</span>
<span class="token punctuation">[</span><span class="token comment">#############                           ]  33% âœ Merging fix/common-issue into feature/branch1...</span>
 âœ” Successfully merged into feature/branch1.
 âœ Attempting to push feature/branch1 to remote<span class="token punctuation">..</span>.
 âœ˜ Failed to push feature/branch1 to remote.
<span class="token punctuation">[</span><span class="token comment">##########################              ]  66% âœ Switching to feature/branch2...</span>
<span class="token punctuation">[</span><span class="token comment">##########################              ]  66% âœ Merging fix/common-issue into feature/branch2...</span>
 âœ˜ Merge conflict detected <span class="token keyword">in</span> feature/branch2<span class="token operator">!</span>
 âœ Aborting merge and restoring clean working directory<span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token comment">########################################] 100% âœ Switching to feature/branch3...</span>
<span class="token punctuation">[</span><span class="token comment">########################################] 100% âœ Merging fix/common-issue into feature/branch3...</span>
 âœ” Successfully merged into feature/branch3.
 âœ Attempting to push feature/branch3 to remote<span class="token punctuation">..</span>.
 âœ˜ Failed to push feature/branch3 to remote.
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Merge Summary:
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Branch                    <span class="token operator">|</span> Status
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
feature/branch1           <span class="token operator">|</span> âœ˜ PushFailed
feature/branch2           <span class="token operator">|</span> âœ˜ Conflict
feature/branch3           <span class="token operator">|</span> âœ˜ PushFailed
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
 âœ Returning to the fix branch<span class="token punctuation">..</span>.
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
Merge process completed.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="å®ç°ä¾æ®" tabindex="-1"><a class="header-anchor" href="#å®ç°ä¾æ®" aria-hidden="true">#</a> å®ç°ä¾æ®</h2><ol><li>å»ºç«‹ä¸€ä¸ª <code>fix/common-issue</code> ä¿®å¤åˆ†æ”¯ï¼Œç”¨äºä¿®å¤æ‰€æœ‰é¡¹ç›®çš„å…±æ€§ bugã€‚</li><li>å°† <code>fix/common-issue</code> åˆ†æ”¯çš„ä¿®å¤å†…å®¹æ‰¹é‡ <code>merge</code> åˆ°å¾…ä¿®å¤çš„é¡¹ç›®åˆ†æ”¯ä¸Šã€‚</li></ol><h2 id="å®ç°è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#å®ç°è„šæœ¬" aria-hidden="true">#</a> å®ç°è„šæœ¬</h2><blockquote><p>åœ¨æ–‡æœ«è¿˜æœ‰æŒ‡ä»¤åŒ–è„šæœ¬ï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># å·²ä¿®å¤åˆ†æ”¯</span>
<span class="token assign-left variable">fix_branch</span><span class="token operator">=</span><span class="token string">&quot;fix/common-issue&quot;</span>

<span class="token comment"># ç›®æ ‡åˆ†æ”¯åˆ—è¡¨</span>
<span class="token assign-left variable">target_branches</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;feature/branch1&quot;</span> <span class="token string">&quot;feature/branch2&quot;</span> <span class="token string">&quot;feature/branch3&quot;</span><span class="token punctuation">)</span>


<span class="token comment"># --------------- ä»¥ä¸‹ä¸ºè„šæœ¬å†…å®¹, æ— éœ€å˜æ›´ ---------------</span>

<span class="token comment"># åˆ†æ”¯çŠ¶æ€è®°å½•ï¼Œæ›¿ä»£å…³è”æ•°ç»„</span>
<span class="token assign-left variable">branch_status_file</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp<span class="token variable">)</span></span>

<span class="token comment"># å›¾æ ‡å’Œç¬¦å·å®šä¹‰</span>
<span class="token assign-left variable">CHECK_MARK</span><span class="token operator">=</span><span class="token string">&quot;âœ”&quot;</span>
<span class="token assign-left variable">CROSS_MARK</span><span class="token operator">=</span><span class="token string">&quot;âœ˜&quot;</span>
<span class="token assign-left variable">ARROW</span><span class="token operator">=</span><span class="token string">&quot;âœ&quot;</span>
<span class="token assign-left variable">SEPARATOR</span><span class="token operator">=</span><span class="token string">&quot;=========================================&quot;</span>
<span class="token assign-left variable">PROGRESS_BAR_WIDTH</span><span class="token operator">=</span><span class="token number">40</span>

<span class="token comment"># åŠ¨æ€è¿›åº¦æ¡</span>
<span class="token function-name function">progress_bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">progress</span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token variable">$2</span>

  <span class="token comment"># é¿å…é™¤ä»¥é›¶</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$total</span>&quot;</span> <span class="token parameter variable">-le</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s &quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $PROGRESS_BAR_WIDTH<span class="token punctuation">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token number">0</span>
    <span class="token builtin class-name">return</span>
  <span class="token keyword">fi</span>

  <span class="token builtin class-name">local</span> <span class="token assign-left variable">percentage</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> progress <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total <span class="token variable">))</span></span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">num_hashes</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> progress <span class="token operator">*</span> PROGRESS_BAR_WIDTH <span class="token operator">/</span> total <span class="token variable">))</span></span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">num_spaces</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> PROGRESS_BAR_WIDTH <span class="token operator">-</span> num_hashes <span class="token variable">))</span></span>

  <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s#&quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $num_hashes<span class="token variable">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token variable">$percentage</span>
<span class="token punctuation">}</span>

<span class="token comment"># æ‰“å°åˆ†éš”çº¿</span>
<span class="token function-name function">print_separator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># æ‰“å°æ ‡é¢˜</span>
<span class="token function-name function">print_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;        ğŸŒ¿ Starting the Merge Process&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># ç¡®ä¿ä¿®å¤åˆ†æ”¯å·²å­˜åœ¨</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">git</span> checkout <span class="token variable">$fix_branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to switch to <span class="token variable">$fix_branch</span>. Please ensure the branch exists.&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token comment"># æ‰“å°å¼€å§‹ä¿¡æ¯</span>
print_title

<span class="token comment"># æ€»åˆ†æ”¯æ•°é‡</span>
<span class="token assign-left variable">total_branches</span><span class="token operator">=</span><span class="token variable">\${<span class="token operator">#</span>target_branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>

<span class="token comment"># é˜²æ­¢ total_branches ä¸º 0</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$total_branches</span>&quot;</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> No target branches specified. Exiting.&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">current_branch_index</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token comment"># éå†ç›®æ ‡åˆ†æ”¯ï¼Œé€ä¸€åˆå¹¶ä¿®å¤</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">branch</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">\${target_branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token assign-left variable">current_branch_index</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>current_branch_index <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span>

  <span class="token comment"># æ›´æ–°åŠ¨æ€è¿›åº¦æ¡</span>
  progress_bar <span class="token variable">$current_branch_index</span> <span class="token variable">$total_branches</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Switching to <span class="token variable">$branch</span>...&quot;</span>

  <span class="token keyword">if</span> <span class="token function">git</span> checkout <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Updating <span class="token variable">$branch</span> to the latest from remote...&quot;</span>
    <span class="token function">git</span> pull <span class="token parameter variable">--rebase</span> origin <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">||</span> <span class="token punctuation">{</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to update <span class="token variable">$branch</span>. Skipping merge.&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:UpdateFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
      <span class="token builtin class-name">continue</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to switch to <span class="token variable">$branch</span>.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:CheckoutFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token builtin class-name">continue</span>
  <span class="token keyword">fi</span>

  progress_bar <span class="token variable">$current_branch_index</span> <span class="token variable">$total_branches</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Merging <span class="token variable">$fix_branch</span> into <span class="token variable">$branch</span>...&quot;</span>

  <span class="token keyword">if</span> <span class="token function">git</span> merge <span class="token variable">$fix_branch</span> --no-ff <span class="token parameter variable">-m</span> <span class="token string">&quot;Merge <span class="token variable">$fix_branch</span> into <span class="token variable">$branch</span>&quot;</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CHECK_MARK}</span> Successfully merged into <span class="token variable">$branch</span>.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Attempting to push <span class="token variable">$branch</span> to remote...&quot;</span>
    <span class="token keyword">if</span> <span class="token function">git</span> push origin <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CHECK_MARK}</span> Successfully pushed <span class="token variable">$branch</span> to remote.&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:Merged&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token keyword">else</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to push <span class="token variable">$branch</span> to remote.&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:PushFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Merge conflict detected in <span class="token variable">$branch</span>!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:Conflict&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Aborting merge and restoring clean working directory...&quot;</span>
    <span class="token function">git</span> merge <span class="token parameter variable">--abort</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment"># æ‰“å°æ±‡æ€»è¡¨æ ¼</span>
print_separator
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Merge Summary:&quot;</span>
print_separator
<span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;Branch&quot;</span> <span class="token string">&quot;Status&quot;</span>
print_separator

<span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>: <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> branch status<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$status</span>&quot;</span> <span class="token keyword">in</span>
    Merged<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CHECK_MARK</span> Merged&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    Conflict<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> Conflict&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    CheckoutFailed<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> CheckoutFailed&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    UpdateFailed<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> UpdateFailed&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    PushFailed<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> PushFailed&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> Unknown&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>

print_separator

<span class="token comment"># æ¸…ç†ä¿®å¤åˆ†æ”¯</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Returning to the fix branch...&quot;</span>
<span class="token function">git</span> checkout <span class="token variable">$fix_branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>

<span class="token comment"># åˆ é™¤ä¸´æ—¶æ–‡ä»¶</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>

print_separator
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Merge process completed.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è„šæœ¬è§£é‡Š" tabindex="-1"><a class="header-anchor" href="#è„šæœ¬è§£é‡Š" aria-hidden="true">#</a> è„šæœ¬è§£é‡Š</h2><h3 id="å˜é‡å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å˜é‡å®šä¹‰" aria-hidden="true">#</a> <strong>å˜é‡å®šä¹‰</strong></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">fix_branch</span><span class="token operator">=</span><span class="token string">&quot;fix/common-issue&quot;</span>
<span class="token assign-left variable">target_branches</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;feature/branch1&quot;</span> <span class="token string">&quot;feature/branch2&quot;</span> <span class="token string">&quot;feature/branch3&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong><code>fix_branch</code></strong>ï¼šä¿®å¤åˆ†æ”¯åç§°ï¼Œæºåˆ†æ”¯ã€‚</li><li><strong><code>target_branches</code></strong>ï¼šç›®æ ‡åˆ†æ”¯åˆ—è¡¨ï¼Œä¿®å¤åˆ†æ”¯éœ€è¦åˆå¹¶åˆ°è¿™äº›åˆ†æ”¯ä¸­ã€‚</li></ul><h3 id="è„šæœ¬å·¥å…·å’Œå¸¸é‡" tabindex="-1"><a class="header-anchor" href="#è„šæœ¬å·¥å…·å’Œå¸¸é‡" aria-hidden="true">#</a> <strong>è„šæœ¬å·¥å…·å’Œå¸¸é‡</strong></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">branch_status_file</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp<span class="token variable">)</span></span>
<span class="token assign-left variable">CHECK_MARK</span><span class="token operator">=</span><span class="token string">&quot;âœ”&quot;</span>
<span class="token assign-left variable">CROSS_MARK</span><span class="token operator">=</span><span class="token string">&quot;âœ˜&quot;</span>
<span class="token assign-left variable">ARROW</span><span class="token operator">=</span><span class="token string">&quot;âœ&quot;</span>
<span class="token assign-left variable">SEPARATOR</span><span class="token operator">=</span><span class="token string">&quot;=========================================&quot;</span>
<span class="token assign-left variable">PROGRESS_BAR_WIDTH</span><span class="token operator">=</span><span class="token number">40</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong><code>mktemp</code></strong>ï¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æ”¯çŠ¶æ€ã€‚</li><li><strong>å›¾æ ‡å’Œç¬¦å·</strong>ï¼šç”¨äºç¾åŒ–è¾“å‡ºï¼Œä¾¿äºå¿«é€Ÿè¯†åˆ«æ“ä½œç»“æœã€‚</li><li><strong><code>PROGRESS_BAR_WIDTH</code></strong>ï¼šåŠ¨æ€è¿›åº¦æ¡å®½åº¦ã€‚</li></ul><h3 id="å‡½æ•°å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°å®šä¹‰" aria-hidden="true">#</a> <strong>å‡½æ•°å®šä¹‰</strong></h3><h4 id="åŠ¨æ€è¿›åº¦æ¡" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€è¿›åº¦æ¡" aria-hidden="true">#</a> <strong>åŠ¨æ€è¿›åº¦æ¡</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function-name function">progress_bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">progress</span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token variable">$2</span>

  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$total</span>&quot;</span> <span class="token parameter variable">-le</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s &quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $PROGRESS_BAR_WIDTH<span class="token punctuation">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token number">0</span>
    <span class="token builtin class-name">return</span>
  <span class="token keyword">fi</span>

  <span class="token builtin class-name">local</span> <span class="token assign-left variable">percentage</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> progress <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total <span class="token variable">))</span></span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">num_hashes</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> progress <span class="token operator">*</span> PROGRESS_BAR_WIDTH <span class="token operator">/</span> total <span class="token variable">))</span></span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">num_spaces</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> PROGRESS_BAR_WIDTH <span class="token operator">-</span> num_hashes <span class="token variable">))</span></span>

  <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s#&quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $num_hashes<span class="token variable">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token variable">$percentage</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>å‚æ•°è¯´æ˜</strong>ï¼š <ul><li><code>progress</code>ï¼šå½“å‰è¿›åº¦ï¼ˆå®Œæˆæ•°ï¼‰ã€‚</li><li><code>total</code>ï¼šæ€»è¿›åº¦ã€‚</li></ul></li><li><strong>ä½œç”¨</strong>ï¼šæ ¹æ®å½“å‰è¿›åº¦å’Œæ€»è¿›åº¦ï¼ŒåŠ¨æ€ç”Ÿæˆè¿›åº¦æ¡ã€‚</li><li><strong>å®ç°é€»è¾‘</strong>ï¼š <ol><li>è®¡ç®—å®Œæˆçš„ç™¾åˆ†æ¯” <code>percentage</code>ã€‚</li><li>ç”Ÿæˆç›¸åº”æ•°é‡çš„ <code>#</code> å’Œç©ºæ ¼æ¥å¡«å……è¿›åº¦æ¡ã€‚</li></ol></li></ul><p><code>printf</code> è¿™é‡Œçš„è¯­æ³•è§£é‡Šï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s#&quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $num_hashes<span class="token variable">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token variable">$percentage</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>åŠŸèƒ½</strong>ï¼šåœ¨åŒä¸€è¡ŒåŠ¨æ€æ›´æ–°è¿›åº¦æ¡ã€‚<br><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p><ol><li><code>\\r</code>ï¼šå›åˆ°å½“å‰è¡Œçš„èµ·å§‹ä½ç½®ï¼Œè¦†ç›–ä¹‹å‰çš„è¾“å‡ºã€‚</li><li><code>[%-\${PROGRESS_BAR_WIDTH}s]</code>ï¼šç”¨äºæ ¼å¼åŒ–è¿›åº¦æ¡ï¼Œå ç”¨å›ºå®šå®½åº¦ã€‚</li><li><code>%3d%%</code>ï¼šæ˜¾ç¤ºå½“å‰å®Œæˆçš„ç™¾åˆ†æ¯”ï¼ˆå³å¯¹é½ï¼Œå®½åº¦ä¸º 3ï¼‰ã€‚</li><li><code>$(...)</code>ï¼šå­å‘½ä»¤æ›¿æ¢ï¼Œç”¨äºç”Ÿæˆè¿›åº¦æ¡çš„å†…å®¹ã€‚</li></ol><p>å¯¹äº <strong><code>%-\${PROGRESS_BAR_WIDTH}s</code></strong> çš„æ‹†åˆ†ç†è§£ï¼š</p><ul><li><p><strong><code>%-...s</code></strong>ï¼šå­—ç¬¦ä¸²å·¦å¯¹é½ï¼Œå®½åº¦ç”± <code>\${PROGRESS_BAR_WIDTH}</code> å†³å®šã€‚</p></li><li><p><strong>å¡«å……å†…å®¹</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s#&quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $num_hashes<span class="token variable">)</span><span class="token variable">)</span></span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸€éƒ¨åˆ†ç”Ÿæˆäº†è¿›åº¦æ¡ä¸­çš„ <code>#</code>ã€‚</p><ol><li><strong><code>seq 1 $num_hashes</code></strong>ï¼š <ul><li>ç”Ÿæˆä» <code>1</code> åˆ° <code>$num_hashes</code> çš„åºåˆ—ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>$num_hashes=10</code>ï¼Œåˆ™ç”Ÿæˆ <code>1 2 3 4 5 6 7 8 9 10</code>ã€‚</li></ul></li><li><strong><code>printf &quot;%0.s#&quot;</code></strong>ï¼š <ul><li>å¯¹æ¯ä¸ªæ•°å­—ï¼Œè¾“å‡ºä¸€ä¸ª <code>#</code>ã€‚</li><li><strong><code>%0.s</code></strong> çš„ä½œç”¨ï¼šå¿½ç•¥ä¼ å…¥å€¼ï¼Œåªè¾“å‡ºå›ºå®šå†…å®¹ <code>#</code>ã€‚</li></ul></li><li><strong>æœ€ç»ˆç»“æœ</strong>ï¼š <ul><li>è‹¥ <code>$num_hashes=10</code>ï¼Œç”Ÿæˆå­—ç¬¦ä¸² <code>##########</code>ã€‚</li></ul></li></ol></li><li><p><strong>å‰©ä½™ç©ºæ ¼</strong>ï¼šæ€»å®½åº¦ä¸º <code>PROGRESS_BAR_WIDTH</code>ï¼Œ<code>#</code> çš„æ•°é‡ä¸º <code>$num_hashes</code>ï¼Œå‰©ä½™éƒ¨åˆ†ç”¨ç©ºæ ¼å¡«å……ã€‚</p></li><li><p><code>%-\${PROGRESS_BAR_WIDTH}s</code> ä¼šè‡ªåŠ¨å¡«å……ä¸è¶³çš„éƒ¨åˆ†ä¸ºç©ºæ ¼ã€‚</p></li><li><p><strong>æ˜¾ç¤ºç™¾åˆ†æ¯”</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>%3d%%
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>%3d</code>ï¼šæ•´æ•°ï¼Œå®½åº¦ä¸º 3ï¼ˆä¸è¶³æ—¶å·¦ä¾§è¡¥ç©ºæ ¼ï¼‰ã€‚</li><li><code>%%</code>ï¼šè¾“å‡ºç™¾åˆ†å·ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><ol><li>å¦‚æœ <code>$percentage=42</code>ï¼Œè¾“å‡º <code>42%</code>ã€‚</li><li>å¦‚æœ <code>$percentage=100</code>ï¼Œè¾“å‡º <code>100%</code>ã€‚</li></ol></li></ul><p>æ­¤å¤–ï¼Œå› ä¸ºå¼€å¤´æœ‰ <code>\\r</code>ï¼Œæ¯æ¬¡æ‰“å°æ—¶ä¼šè¦†ç›–ä¹‹å‰çš„å†…å®¹ï¼Œæ˜¾ç¤ºåŠ¨æ€è¿›åº¦æ¡ã€‚</p><h4 id="æ‰“å°åˆ†éš”çº¿å’Œæ ‡é¢˜" tabindex="-1"><a class="header-anchor" href="#æ‰“å°åˆ†éš”çº¿å’Œæ ‡é¢˜" aria-hidden="true">#</a> <strong>æ‰“å°åˆ†éš”çº¿å’Œæ ‡é¢˜</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function-name function">print_separator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">print_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;        ğŸŒ¿ Starting the Merge Process&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ ¸å¿ƒé€»è¾‘" tabindex="-1"><a class="header-anchor" href="#æ ¸å¿ƒé€»è¾‘" aria-hidden="true">#</a> <strong>æ ¸å¿ƒé€»è¾‘</strong></h3><h4 id="åˆ‡æ¢åˆ°ä¿®å¤åˆ†æ”¯" tabindex="-1"><a class="header-anchor" href="#åˆ‡æ¢åˆ°ä¿®å¤åˆ†æ”¯" aria-hidden="true">#</a> <strong>åˆ‡æ¢åˆ°ä¿®å¤åˆ†æ”¯</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">git</span> checkout <span class="token variable">$fix_branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to switch to <span class="token variable">$fix_branch</span>. Please ensure the branch exists.&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨ <code>git checkout</code> åˆ‡æ¢åˆ°ä¿®å¤åˆ†æ”¯ã€‚å¦‚æœå¤±è´¥ï¼Œæ‰“å°é”™è¯¯å¹¶é€€å‡ºè„šæœ¬ã€‚</li></ul><h4 id="åˆå¹¶å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#åˆå¹¶å¾ªç¯" aria-hidden="true">#</a> <strong>åˆå¹¶å¾ªç¯</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">branch</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">\${target_branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token punctuation">..</span>.
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ­¥éª¤</strong>ï¼š</p><ol><li><p><strong>åŠ¨æ€æ›´æ–°è¿›åº¦æ¡</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>progress_bar <span class="token variable">$current_branch_index</span> <span class="token variable">$total_branches</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„å¤„ç†è¿›åº¦ã€‚</p></li><li><p><strong>åˆ‡æ¢åˆ†æ”¯</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">git</span> checkout <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:CheckoutFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
  <span class="token builtin class-name">continue</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœåˆ‡æ¢å¤±è´¥ï¼Œè®°å½•çŠ¶æ€å¹¶è·³è¿‡ã€‚</p></li><li><p><strong>åˆå¹¶ä¿®å¤åˆ†æ”¯</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token function">git</span> merge <span class="token variable">$fix_branch</span> --no-ff <span class="token parameter variable">-m</span> <span class="token string">&quot;Merge <span class="token variable">$fix_branch</span> into <span class="token variable">$branch</span>&quot;</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token punctuation">..</span>.
<span class="token keyword">else</span>
  <span class="token function">git</span> merge <span class="token parameter variable">--abort</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æˆåŠŸæ—¶ï¼š <ul><li>è®°å½•çŠ¶æ€ä¸º <code>Merged</code>ã€‚</li><li>æ¨é€åˆ°è¿œç¨‹ï¼Œè®°å½•æ¨é€ç»“æœã€‚</li></ul></li><li>å¤±è´¥æ—¶ï¼š <ul><li>è®°å½•çŠ¶æ€ä¸º <code>Conflict</code>ã€‚</li><li>æ‰§è¡Œ <code>git merge --abort</code> æ¢å¤å·¥ä½œç›®å½•ã€‚</li></ul></li></ul></li></ol><h4 id="æ‰“å°æ±‡æ€»è¡¨æ ¼" tabindex="-1"><a class="header-anchor" href="#æ‰“å°æ±‡æ€»è¡¨æ ¼" aria-hidden="true">#</a> <strong>æ‰“å°æ±‡æ€»è¡¨æ ¼</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>: <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> branch status<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$status</span>&quot;</span> <span class="token keyword">in</span>
    <span class="token punctuation">..</span>.
  <span class="token keyword">esac</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>éå†çŠ¶æ€æ–‡ä»¶ <code>branch_status_file</code>ï¼Œæ ¹æ®çŠ¶æ€æ‰“å°ç»“æœï¼Œæä¾›ç›´è§‚çš„æ±‡æ€»ä¿¡æ¯ã€‚</li><li><code>IFS</code>ï¼ˆInternal Field Separatorï¼‰ç”¨äºæŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ï¼Œè¿™é‡Œè®¾ç½®ä¸ºå†’å·ï¼ˆ<code>:</code>ï¼‰ã€‚å› ä¸ºç¬”è€…æ­¤å‰ç”¨ <code>declare -A branch_status</code> æ¥è®°å½•çŠ¶æ€æ—¶å‘ç°æ€»æ˜¯å¤±è´¥ï¼Œæ‰€ä»¥æ”¹ç”¨æ–‡ä»¶è®°å½•çŠ¶æ€ã€‚</li><li>åœ¨è¿™é‡Œï¼Œå¦‚æœæœ‰ä¸€è¡Œå†…å®¹ä¸º <code>feature/branch1:Merged</code>ï¼Œåˆ™ <code>read</code> å‘½ä»¤ä¼šå°† <code>feature/branch1</code> åˆ†é…ç»™å˜é‡ <code>branch</code>ï¼Œ<code>Merged</code> åˆ†é…ç»™å˜é‡ <code>status</code>ã€‚</li><li><code>&lt; &quot;$branch_status_file&quot;</code> å°†æ–‡ä»¶ <code>$branch_status_file</code> çš„å†…å®¹é€è¡Œè¾“å…¥åˆ° <code>while</code> å¾ªç¯ä¸­ã€‚æ–‡ä»¶çš„æ¯ä¸€è¡Œéƒ½ä¼šè¢«ä¼ é€’ç»™ <code>read</code> å‘½ä»¤ã€‚</li></ul><h3 id="æ¸…ç†ä¸ç»“æŸ" tabindex="-1"><a class="header-anchor" href="#æ¸…ç†ä¸ç»“æŸ" aria-hidden="true">#</a> <strong>æ¸…ç†ä¸ç»“æŸ</strong></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">git</span> checkout <span class="token variable">$fix_branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åˆ‡æ¢å›ä¿®å¤åˆ†æ”¯ã€‚</li><li>åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œæ¸…ç†è¿è¡Œç¯å¢ƒã€‚</li></ul><h3 id="å…³é”®æŠ€æœ¯å’Œè¯­æ³•" tabindex="-1"><a class="header-anchor" href="#å…³é”®æŠ€æœ¯å’Œè¯­æ³•" aria-hidden="true">#</a> <strong>å…³é”®æŠ€æœ¯å’Œè¯­æ³•</strong></h3><ol><li><strong>åŠ¨æ€è¿›åº¦æ¡</strong>ï¼šé€šè¿‡ <code>printf</code> å’Œ <code>seq</code> æ„å»ºåŠ¨æ€ã€å®æ—¶æ›´æ–°çš„è¾“å‡ºã€‚</li><li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåˆ©ç”¨ <code>if</code> å’Œ <code>continue</code> ç­‰è¯­æ³•æ•è·é”™è¯¯ï¼Œä¿è¯è„šæœ¬çš„å¥å£®æ€§ã€‚</li><li><strong>ä¸´æ—¶æ–‡ä»¶</strong>ï¼šé€šè¿‡ <code>mktemp</code> åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œé¿å…å˜é‡å†²çªã€‚</li><li><strong>çŠ¶æ€æ±‡æ€»</strong>ï¼šé€šè¿‡æ–‡ä»¶è®°å½•å’Œ <code>while</code> å¾ªç¯å®ç°æ‰¹é‡ç»“æœåˆ†æã€‚</li></ol><h2 id="æŒ‡ä»¤åŒ–è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#æŒ‡ä»¤åŒ–è„šæœ¬" aria-hidden="true">#</a> æŒ‡ä»¤åŒ–è„šæœ¬</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å¸®åŠ©ä¿¡æ¯</span>
<span class="token function-name function">print_usage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: <span class="token variable">$0</span> -f &lt;fix_branch&gt; -t &lt;target_branches&gt;&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;  -f  Specify the fix branch to merge from.&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;  -t  Specify the target branches to merge into (comma-separated).&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Example:&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;  <span class="token variable">$0</span> -f fix/common-issue -t feature/branch1,feature/branch2,feature/branch3&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token comment"># å‚æ•°åˆå§‹åŒ–</span>
<span class="token assign-left variable">fix_branch</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token assign-left variable">target_branches</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># è§£æå‘½ä»¤è¡Œå‚æ•°</span>
<span class="token keyword">while</span> <span class="token builtin class-name">getopts</span> <span class="token string">&quot;f:t:&quot;</span> opt<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$opt</span>&quot;</span> <span class="token keyword">in</span>
    f<span class="token punctuation">)</span>
      <span class="token assign-left variable">fix_branch</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$OPTARG</span>&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    t<span class="token punctuation">)</span>
      <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">&#39;,&#39;</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-a</span> target_branches <span class="token operator">&lt;&lt;&lt;</span> <span class="token string">&quot;<span class="token variable">$OPTARG</span>&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
      print_usage
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token keyword">done</span>

<span class="token comment"># æ£€æŸ¥å¿…éœ€å‚æ•°æ˜¯å¦ä¸ºç©º</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$fix_branch</span>&quot;</span> <span class="token operator">||</span> <span class="token variable">\${<span class="token operator">#</span>target_branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  print_usage
<span class="token keyword">fi</span>

<span class="token comment"># --------------- æ ¸å¿ƒé€»è¾‘ ---------------</span>

<span class="token comment"># åˆ†æ”¯çŠ¶æ€è®°å½•ï¼Œæ›¿ä»£å…³è”æ•°ç»„</span>
<span class="token assign-left variable">branch_status_file</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp<span class="token variable">)</span></span>

<span class="token comment"># å›¾æ ‡å’Œç¬¦å·å®šä¹‰</span>
<span class="token assign-left variable">CHECK_MARK</span><span class="token operator">=</span><span class="token string">&quot;âœ”&quot;</span>
<span class="token assign-left variable">CROSS_MARK</span><span class="token operator">=</span><span class="token string">&quot;âœ˜&quot;</span>
<span class="token assign-left variable">ARROW</span><span class="token operator">=</span><span class="token string">&quot;âœ&quot;</span>
<span class="token assign-left variable">SEPARATOR</span><span class="token operator">=</span><span class="token string">&quot;=========================================&quot;</span>
<span class="token assign-left variable">PROGRESS_BAR_WIDTH</span><span class="token operator">=</span><span class="token number">40</span>

<span class="token comment"># åŠ¨æ€è¿›åº¦æ¡</span>
<span class="token function-name function">progress_bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">progress</span><span class="token operator">=</span><span class="token variable">$1</span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">total</span><span class="token operator">=</span><span class="token variable">$2</span>

  <span class="token comment"># é¿å…é™¤ä»¥é›¶</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$total</span>&quot;</span> <span class="token parameter variable">-le</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s &quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $PROGRESS_BAR_WIDTH<span class="token punctuation">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token number">0</span>
    <span class="token builtin class-name">return</span>
  <span class="token keyword">fi</span>

  <span class="token builtin class-name">local</span> <span class="token assign-left variable">percentage</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> progress <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> total <span class="token variable">))</span></span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">num_hashes</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> progress <span class="token operator">*</span> PROGRESS_BAR_WIDTH <span class="token operator">/</span> total <span class="token variable">))</span></span>
  <span class="token builtin class-name">local</span> <span class="token assign-left variable">num_spaces</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> PROGRESS_BAR_WIDTH <span class="token operator">-</span> num_hashes <span class="token variable">))</span></span>

  <span class="token builtin class-name">printf</span> <span class="token string">&quot;<span class="token entity" title="\\r">\\r</span>[%-<span class="token variable">\${PROGRESS_BAR_WIDTH}</span>s] %3d%%&quot;</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">printf</span> <span class="token string">&quot;%0.s#&quot;</span> <span class="token punctuation">$(</span>seq <span class="token number">1</span> $num_hashes<span class="token variable">)</span><span class="token variable">)</span></span>&quot;</span> <span class="token variable">$percentage</span>
<span class="token punctuation">}</span>

<span class="token comment"># æ‰“å°åˆ†éš”çº¿</span>
<span class="token function-name function">print_separator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># æ‰“å°æ ‡é¢˜</span>
<span class="token function-name function">print_title</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;        ğŸŒ¿ Starting the Merge Process&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$SEPARATOR</span>&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># ç¡®ä¿ä¿®å¤åˆ†æ”¯å·²å­˜åœ¨</span>
<span class="token keyword">if</span> <span class="token operator">!</span> <span class="token function">git</span> checkout <span class="token variable">$fix_branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to switch to <span class="token variable">$fix_branch</span>. Please ensure the branch exists.&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token comment"># æ‰“å°å¼€å§‹ä¿¡æ¯</span>
print_title

<span class="token comment"># æ€»åˆ†æ”¯æ•°é‡</span>
<span class="token assign-left variable">total_branches</span><span class="token operator">=</span><span class="token variable">\${<span class="token operator">#</span>target_branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>

<span class="token comment"># é˜²æ­¢ total_branches ä¸º 0</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$total_branches</span>&quot;</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> No target branches specified. Exiting.&quot;</span>
  <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">current_branch_index</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token comment"># éå†ç›®æ ‡åˆ†æ”¯ï¼Œé€ä¸€åˆå¹¶ä¿®å¤</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">branch</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">\${target_branches<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>&quot;</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token assign-left variable">current_branch_index</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>current_branch_index <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span>

  <span class="token comment"># æ›´æ–°åŠ¨æ€è¿›åº¦æ¡</span>
  progress_bar <span class="token variable">$current_branch_index</span> <span class="token variable">$total_branches</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Switching to <span class="token variable">$branch</span>...&quot;</span>

  <span class="token keyword">if</span> <span class="token function">git</span> checkout <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Updating <span class="token variable">$branch</span> to the latest from remote...&quot;</span>
    <span class="token function">git</span> pull <span class="token parameter variable">--rebase</span> origin <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">||</span> <span class="token punctuation">{</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to update <span class="token variable">$branch</span>. Skipping merge.&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:UpdateFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
      <span class="token builtin class-name">continue</span>
    <span class="token punctuation">}</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to switch to <span class="token variable">$branch</span>.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:CheckoutFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token builtin class-name">continue</span>
  <span class="token keyword">fi</span>

  progress_bar <span class="token variable">$current_branch_index</span> <span class="token variable">$total_branches</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Merging <span class="token variable">$fix_branch</span> into <span class="token variable">$branch</span>...&quot;</span>

  <span class="token keyword">if</span> <span class="token function">git</span> merge <span class="token variable">$fix_branch</span> --no-ff <span class="token parameter variable">-m</span> <span class="token string">&quot;Merge <span class="token variable">$fix_branch</span> into <span class="token variable">$branch</span>&quot;</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CHECK_MARK}</span> Successfully merged into <span class="token variable">$branch</span>.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Attempting to push <span class="token variable">$branch</span> to remote...&quot;</span>
    <span class="token keyword">if</span> <span class="token function">git</span> push origin <span class="token variable">$branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CHECK_MARK}</span> Successfully pushed <span class="token variable">$branch</span> to remote.&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:Merged&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token keyword">else</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Failed to push <span class="token variable">$branch</span> to remote.&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:PushFailed&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${CROSS_MARK}</span> Merge conflict detected in <span class="token variable">$branch</span>!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$branch</span>:Conflict&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Aborting merge and restoring clean working directory...&quot;</span>
    <span class="token function">git</span> merge <span class="token parameter variable">--abort</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token comment"># æ‰“å°æ±‡æ€»è¡¨æ ¼</span>
print_separator
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Merge Summary:&quot;</span>
print_separator
<span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;Branch&quot;</span> <span class="token string">&quot;Status&quot;</span>
print_separator

<span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>: <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> branch status<span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$status</span>&quot;</span> <span class="token keyword">in</span>
    Merged<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CHECK_MARK</span> Merged&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    Conflict<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> Conflict&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    CheckoutFailed<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> CheckoutFailed&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    UpdateFailed<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> UpdateFailed&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    PushFailed<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> PushFailed&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span>
      <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-25s | %-15s<span class="token entity" title="\\n">\\n</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$branch</span>&quot;</span> <span class="token string">&quot;<span class="token variable">$CROSS_MARK</span> Unknown&quot;</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>

print_separator

<span class="token comment"># æ¸…ç†ä¿®å¤åˆ†æ”¯</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">\${ARROW}</span> Returning to the fix branch...&quot;</span>
<span class="token function">git</span> checkout <span class="token variable">$fix_branch</span> <span class="token operator">&gt;</span>/dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>

<span class="token comment"># åˆ é™¤ä¸´æ—¶æ–‡ä»¶</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$branch_status_file</span>&quot;</span>

print_separator
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Merge process completed.&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶å¯ä»¥é€šè¿‡ node è„šæœ¬æ¥æŒ‡ä»¤åŒ–è°ƒç”¨å•¦~ ä¸ç”¨é¢å¤–å®‰è£…ä¾èµ–ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> exec <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;child_process&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// æ„é€ æŒ‡ä»¤</span>
<span class="token keyword">const</span> fixBranch <span class="token operator">=</span> <span class="token string">&#39;fix/common-issue&#39;</span>
<span class="token keyword">const</span> targetBranches <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">&#39;feature/branch1&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;feature/branch2&#39;</span><span class="token punctuation">,</span>
  <span class="token string">&#39;feature/branch3&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;,&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// è„šæœ¬è·¯å¾„-è¿™é‡Œçš„ \`mergeGit.sh\` ä¸ºä¸Šè¿°è„šæœ¬ä¿å­˜åç§°</span>
<span class="token keyword">const</span> scriptPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./mergeGit.sh&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> command <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">bash </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>scriptPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> -f </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>fixBranch<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> -t </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>targetBranches<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>

<span class="token comment">// æ‰§è¡Œè„šæœ¬</span>
<span class="token function">exec</span><span class="token punctuation">(</span>command<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> stdout<span class="token punctuation">,</span> stderr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>stderr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Stderr: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>stderr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Output:\\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>stdout<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,49),c=[i];function r(u,k){return o(),l("div",null,c)}const v=s(t,[["render",r],["__file","other08.html.vue"]]);export{v as default};
