import{_ as e,Z as o,a0 as c,F as i,a1 as l,X as u,Y as r,$ as k}from"./framework-5dd7fabc.js";const d={},s=o,n=c,m=i,t=l,a=k,v=u,b=r,y=a(`<p>在此前系列中，笔者梳理了 Cesium 的基本使用方法，但是为了更进阶了解 Cesium，我们需要了解 Cesium 的核心机制，其中之一就是 Property 属性机制。</p><p>这是 Property 类型整体分类。</p><figure><img src="https://cdn.jsdelivr.net/gh/rayadaschn/blogImage@master/img/Property 类型.jpg" alt="Property 类型" tabindex="0" loading="lazy"><figcaption>Property 类型</figcaption></figure><h2 id="区分-entity-和-property" tabindex="-1"><a class="header-anchor" href="#区分-entity-和-property" aria-hidden="true">#</a> 区分 Entity 和 Property</h2><p>此前，简单的介绍过 <code>Entity</code> 和 <code>Property</code> 的区别。</p><p><code>Entity</code> 是 Cesium 中最基础的类，它代表了一个三维对象，例如一个球体、一个平面、一个模型等。<code>Entity</code> 是一个抽象的概念，它不包含任何具体的几何信息，只包含一些属性，例如位置、颜色、大小等。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Satellite&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.59777</span><span class="token punctuation">,</span> <span class="token number">40.03883</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Property</code> 用于表示属性的值可以随时间变化。它通常用于描述 <code>Entity</code> 的动态属性，如位置、颜色、方向等。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledPositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
position<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
position<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">80.0</span><span class="token punctuation">,</span> <span class="token number">45.0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> position<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>总体来说，<code>Entity</code> 是表示场景中对象的基本构建块，包含多个静态或动态属性。<code>Property</code> 是用于定义这些属性随时间变化的接口和机制，使得 <code>Entity</code> 的行为可以根据时间进行动态变化。</p><h2 id="property-的分类" tabindex="-1"><a class="header-anchor" href="#property-的分类" aria-hidden="true">#</a> Property 的分类</h2><p>如开篇图片总结一致，在 Cesium 中 Property 基本上可以分为四类：基本类型、PositionProperty 坐标类型、MaterialProperty 材质类型和其它类型。</p>`,12),C={href:"https://cesium.com/learn/ion-sdk/ref-doc/Property.html?classFilter=Property",target:"_blank",rel:"noopener noreferrer"},w=a(`<p><strong>公共只读属性</strong>:</p><ul><li><code>definitionChanged</code>：当属性的定义发生变化时触发的<strong>事件</strong>。</li><li><code>isConstant</code>：一个布尔值，指示属性是否为常量，用来判断该属性是否会随时间变化。Cesium 会依据该变量来判断物体是否需要更新。</li></ul><p><strong>公共方法</strong>：</p><ul><li><code>equals(other)</code>：比较当前属性与提供的属性是否相等。</li><li><code>getValue(time, result)</code>：获取指定时间的属性值。<code>time</code>参数是一个<code>JulianDate</code>对象，表示时间；<code>result</code>是一个<strong>可选参数</strong>，用于存储返回的值。</li></ul><h3 id="基本类型" tabindex="-1"><a class="header-anchor" href="#基本类型" aria-hidden="true">#</a> 基本类型</h3><p>基本类型包括 <code>ConstantProperty</code>、<code>SampledProperty</code>、<code>TimeIntervalCollectionProperty</code> 和 <code>CompositeProperty</code>。</p><ul><li><code>ConstantProperty</code>：表示一个恒定的属性值，即该属性的值在所有时间点上都相同。</li><li><code>SampledProperty</code>：表示一个随时间变化的属性值，即该属性的值在多个时间点上进行采样。</li><li><code>TimeIntervalCollectionProperty</code>：表示一个随时间变化的属性值，但是每个时间段的属性值可以不同。</li><li><code>CompositeProperty</code>：表示一个组合属性，即该属性的值由多个子属性组合而成。</li></ul><h4 id="constantproperty" tabindex="-1"><a class="header-anchor" href="#constantproperty" aria-hidden="true">#</a> ConstantProperty</h4><p><code>ConstantProperty</code> 是一个常量属性，它的值在所有时间点上都相同。它通常用于表示静态属性，例如物体的颜色、大小等。</p><p>构造函数: <code>new Cesium.ConstantProperty(value)</code>。<code>value</code>: 属性值，是可选参数。</p><p>虽然说是不可变，实际上是不随时间发生变化，<code>ConstantProperty</code> 是具有<code>setValue(value)</code>方法的，依据该方法可以修改物体的值。</p><h4 id="sampledproperty" tabindex="-1"><a class="header-anchor" href="#sampledproperty" aria-hidden="true">#</a> SampledProperty</h4><p><code>SampledProperty</code> 是一个采样属性，它的值在多个时间点上进行采样。它通常用于表示随时间变化的属性，例如物体的位置、方向等。</p><p>构造函数: <code>new Cesium.SampledProperty(type, derivativeTypes)</code>。<code>type</code> 是属性类型，<code>derivativeTypes</code> 是可选数组，表示样本将包含指定类型的导数信息。</p><p>创建并使用线性插值的 <code>Cartesian2</code> 属性：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> property <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledProperty</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Cartesian2<span class="token punctuation">)</span>

property<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token string">&#39;2012-08-01T00:00:00.00Z&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
property<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token string">&#39;2012-08-02T00:00:00.00Z&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> property<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token string">&#39;2012-08-01T12:00:00.00Z&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="timeintervalcollectionproperty" tabindex="-1"><a class="header-anchor" href="#timeintervalcollectionproperty" aria-hidden="true">#</a> TimeIntervalCollectionProperty</h4><p><code>TimeIntervalCollectionProperty</code> 是一个时间间隔集合属性，它的值在多个时间间隔内可以不同。它通常用于表示随时间间断变化的属性，例如物体的位置、方向等。没有 Sampled 那样插值结果丝滑。</p><p>多了一个 <code>intervals</code> 只读属性，并以此定义间断收集。</p><p>创建一个 <code>Cartesian2</code> 间隔属性，包含 2012 年 8 月 1 日的数据，并每 6 小时使用不同的值。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> composite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeIntervalCollectionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T00:00:00.00Z/2012-08-01T06:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T06:00:00.00Z/2012-08-01T12:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">12.0</span><span class="token punctuation">,</span> <span class="token number">2.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T12:00:00.00Z/2012-08-01T18:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">,</span> <span class="token number">12.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T18:00:00.00Z/2012-08-02T00:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">85.0</span><span class="token punctuation">,</span> <span class="token number">4.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="compositeproperty" tabindex="-1"><a class="header-anchor" href="#compositeproperty" aria-hidden="true">#</a> CompositeProperty</h4><p><code>CompositeProperty</code> 是一个组合属性，它的值由多个子属性组合而成。它允许用户定义一个由 <code>TimeIntervalCollection</code> 管理的属性集合。每个时间间隔内的 <code>data</code> 属性是另一个 <code>Property</code> 实例，这个实例会在给定时间被渲染。</p><p><code>CompositeProperty</code> 类通过 <code>new Cesium.CompositeProperty()</code> 构造函数创建。 它使用 <code>TimeIntervalCollection</code> 来定义属性，每个时间间隔内的数据属性是另一个 <code>Property</code> 实例。</p><p>假设现在有两个属性：<code>constantProperty</code> 和 <code>sampledProperty</code>，使用 <code>CompositeProperty</code> 的 <code>addInterval</code> 方法添加时间间隔，例如。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> composite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CompositeProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T00:00:00.00Z/2012-08-01T12:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> constantProperty<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T12:00:00.00Z/2012-08-02T00:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> sampledProperty<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="positionproperty-坐标类型" tabindex="-1"><a class="header-anchor" href="#positionproperty-坐标类型" aria-hidden="true">#</a> PositionProperty 坐标类型</h3><p><code>PositionProperty</code> 同基础类型特别相似，只是多了一个 Position，来表示位置信息。</p><p>当然也多了一个成员公共方法 <code>getValueInReferenceFrame(time, referenceFrame, result) :Cartesian3|undefined</code> ：在提供的时间和参考框架中获取属性的值。</p><ul><li><code>time</code>：要检索值的时间，类型为<code>JulianDate</code>。</li><li><code>referenceFrame</code>：所需的结果的参考框架。</li><li><code>result</code>：可选，用于存储值的对象，如果省略，则创建并返回一个新实例。</li></ul><p>常见的子类:</p><ol><li><code>ConstantPositionProperty</code>: 用于定义静态位置。</li><li><code>SampledPositionProperty</code>: 用于定义随时间变化的位置。</li><li><code>TimeIntervalCollectionPositionProperty</code>: 用于定义随时间间断变化的位置。</li><li><code>CompositePositionProperty</code>: 用于组合多个位置属性，按时间间隔定义位置。</li></ol><p>由于 <code>PositionProperty</code> 同基础类型特别相似，因此下面更多从使用方式上进行总结。</p><h4 id="constantpositionproperty" tabindex="-1"><a class="header-anchor" href="#constantpositionproperty" aria-hidden="true">#</a> ConstantPositionProperty</h4><p><code>ConstantPositionProperty</code> 在 Cesium 中用于定义静态位置。它通过存储一个固定的位置，来描述对象在所有时间点的位置，通常用于定义地面静态对象（如建筑物、地标等）。</p><p><strong>使用步骤</strong>:</p><ol><li>创建 <code>ConstantPositionProperty</code> 实例。</li><li>设置位置。</li><li>将 <code>ConstantPositionProperty</code> 赋值给 <code>Entity</code> 的 <code>position</code> 属性。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建 Cesium Viewer 实例</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 创建 ConstantPositionProperty 实例</span>
<span class="token keyword">const</span> constantPosition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ConstantPositionProperty</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 ConstantPositionProperty 赋值给 position 属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> constantPosition<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="sampledpositionproperty" tabindex="-1"><a class="header-anchor" href="#sampledpositionproperty" aria-hidden="true">#</a> SampledPositionProperty</h4><p><code>SampledPositionProperty</code> 在 Cesium 中用于定义随时间变化的位置。它通过存储一系列时间和位置的样本，来描述对象在不同时间点的位置。这在模拟动态运动（如卫星轨道、飞行路径等）时非常有用。</p><p><strong>使用步骤</strong>:</p><ol><li>创建 <code>SampledPositionProperty</code> 实例。</li><li>添加时间和位置样本。</li><li>将 <code>SampledPositionProperty</code> 赋值给 <code>Entity</code> 的 <code>position</code> 属性。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建 Cesium Viewer 实例</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 创建 SampledPositionProperty 实例</span>
<span class="token keyword">const</span> position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledPositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 定义样本时间点和位置</span>
<span class="token keyword">const</span> startTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> endTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> position1 <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> position2 <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">80.0</span><span class="token punctuation">,</span> <span class="token number">45.0</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token comment">// 添加样本到 SampledPositionProperty</span>
position<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> position1<span class="token punctuation">)</span>
position<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>endTime<span class="token punctuation">,</span> position2<span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 SampledPositionProperty 赋值给 position 属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> position<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>

<span class="token comment">// 通过 timeline 和 clock 演示位置变化</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>startTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>stopTime <span class="token operator">=</span> endTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>clockRange <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>ClockRange<span class="token punctuation">.</span><span class="token constant">LOOP_STOP</span> <span class="token comment">// 循环</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>multiplier <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 时间流速倍率</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="timeintervalcollectionpositionproperty" tabindex="-1"><a class="header-anchor" href="#timeintervalcollectionpositionproperty" aria-hidden="true">#</a> TimeIntervalCollectionPositionProperty</h4><p><code>TimeIntervalCollectionPositionProperty</code> 用于间断的定义物体在不同时间区间的位置，每个时间区间 (<code>TimeInterval</code>) 可以包含一个不同的属性值。在 <code>TimeIntervalCollectionPositionProperty</code> 中，这些时间区间用于定义不同时间段的不同位置。</p><p>使用方法同 SampledPositionProperty 类似，只是需要使用 <code>TimeIntervalCollectionProperty</code> 来定义时间区间和位置。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建 Cesium Viewer 实例</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 创建 TimeIntervalCollectionPositionProperty 实例</span>
<span class="token keyword">const</span> timeIntervalCollection <span class="token operator">=</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeIntervalCollectionPositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 定义时间区间和对应的位置</span>
<span class="token keyword">const</span> startTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> midTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> endTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> position1 <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> position2 <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">80.0</span><span class="token punctuation">,</span> <span class="token number">45.0</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> position3 <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">85.0</span><span class="token punctuation">,</span> <span class="token number">50.0</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>

<span class="token comment">// 添加时间区间到 TimeIntervalCollectionPositionProperty</span>
timeIntervalCollection<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> startTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> midTime<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> position1<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
timeIntervalCollection<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> midTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> endTime<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> position2<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
timeIntervalCollection<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> endTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">addMinutes</span><span class="token punctuation">(</span>endTime<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>JulianDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> position3<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 TimeIntervalCollectionPositionProperty 赋值给 position 属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> timeIntervalCollection<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">YELLOW</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>

<span class="token comment">// 通过 timeline 和 clock 演示位置变化</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>startTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>stopTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">addMinutes</span><span class="token punctuation">(</span>
  endTime<span class="token punctuation">,</span>
  <span class="token number">5</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>JulianDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>clockRange <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>ClockRange<span class="token punctuation">.</span><span class="token constant">LOOP_STOP</span> <span class="token comment">// 循环</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>multiplier <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 时间流速倍率</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="compositepositionproperty" tabindex="-1"><a class="header-anchor" href="#compositepositionproperty" aria-hidden="true">#</a> CompositePositionProperty</h4><p><code>CompositePositionProperty</code> 则是组合式。可以定义多个不同的物体，在不同时间区间内的表现。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建 Cesium Viewer 实例</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 定义时间区间</span>
<span class="token keyword">const</span> startTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> midTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> endTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 定义第一个 PositionProperty</span>
<span class="token keyword">const</span> sampledPosition1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledPositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sampledPosition1<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  startTime<span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
sampledPosition1<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  midTime<span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">80.0</span><span class="token punctuation">,</span> <span class="token number">45.0</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 定义第二个 PositionProperty</span>
<span class="token keyword">const</span> sampledPosition2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledPositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
sampledPosition2<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  midTime<span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">80.0</span><span class="token punctuation">,</span> <span class="token number">45.0</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
sampledPosition2<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  endTime<span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">85.0</span><span class="token punctuation">,</span> <span class="token number">50.0</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建 CompositePositionProperty 实例</span>
<span class="token keyword">const</span> compositePosition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CompositePositionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 将两个 PositionProperty 添加到 CompositePositionProperty，并定义它们的有效时间区间</span>
compositePosition<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> startTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> midTime<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> sampledPosition1<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
compositePosition<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> midTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> endTime<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> sampledPosition2<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 CompositePositionProperty 赋值给 position 属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> compositePosition<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">GREEN</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>

<span class="token comment">// 通过 timeline 和 clock 演示位置变化</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>startTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>stopTime <span class="token operator">=</span> endTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>clockRange <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>ClockRange<span class="token punctuation">.</span><span class="token constant">LOOP_STOP</span> <span class="token comment">// 循环</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>multiplier <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 时间流速倍率</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="materialproperty-材质类型" tabindex="-1"><a class="header-anchor" href="#materialproperty-材质类型" aria-hidden="true">#</a> MaterialProperty 材质类型</h3><p><code>MaterialProperty</code> 定义了所有表示材质 <code>uniforms</code> 的属性对象的接口。</p><p>相对于其他类型，它也多了一个公共方法 <code>getType(time): string</code>，用于获取指定时间的材质类型。</p><p>常用的材质有:</p><ol><li><code>ColorMaterialProperty</code> 颜色类型;</li><li><code>CompositeMaterialProperty</code> 组合多个材质类型;</li><li><code>GridMaterialProperty</code> 网格图案类型;</li><li><code>ImageMaterialProperty</code> 图像材质类型;</li><li><code>PolylineGlowMaterialProperty</code> 折线类型;</li><li><code>PolylineOutlineMaterialProperty</code> 折线轮廓类型;</li><li><code>StripeMaterialProperty</code> 条纹图案类型;</li></ol>`,55),f={href:"https://cesium.com/learn/ion-sdk/ref-doc/MaterialProperty.html",target:"_blank",rel:"noopener noreferrer"},P=a(`<h4 id="colormaterialproperty" tabindex="-1"><a class="header-anchor" href="#colormaterialproperty" aria-hidden="true">#</a> ColorMaterialProperty</h4><p><code>ColorMaterialProperty</code> 是一种颜色材质，可以设置颜色和透明度。</p><p><strong>使用方法</strong>:</p><ol><li>创建 <code>ColorMaterialProperty</code> 实例。</li><li>将 <code>ColorMaterialProperty</code> 赋值给实体的材质属性。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建 Cesium Viewer 实例</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 创建 ColorMaterialProperty 实例</span>
<span class="token keyword">const</span> colorMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorMaterialProperty</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 ColorMaterialProperty 赋值给材质属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">polygon</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">hierarchy</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegreesArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token operator">-</span><span class="token number">115.0</span><span class="token punctuation">,</span> <span class="token number">37.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">115.0</span><span class="token punctuation">,</span> <span class="token number">32.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">107.0</span><span class="token punctuation">,</span> <span class="token number">33.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">102.0</span><span class="token punctuation">,</span> <span class="token number">31.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">102.0</span><span class="token punctuation">,</span> <span class="token number">35.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">material</span><span class="token operator">:</span> colorMaterial<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然，可以结合之前的 <code>SampledProperty</code> 使得物体颜色随时间进行变化:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 创建 Cesium Viewer 实例</span>
<span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 定义颜色随时间变化</span>
<span class="token keyword">const</span> startTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> endTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> colorProperty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledProperty</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">)</span>
colorProperty<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span>
colorProperty<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">addMinutes</span><span class="token punctuation">(</span>startTime<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>JulianDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">GREEN</span>
<span class="token punctuation">)</span>
colorProperty<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>endTime<span class="token punctuation">,</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">)</span>

<span class="token comment">// 创建 ColorMaterialProperty 实例</span>
<span class="token keyword">const</span> colorMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorMaterialProperty</span><span class="token punctuation">(</span>colorProperty<span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 ColorMaterialProperty 赋值给材质属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">polygon</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">hierarchy</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegreesArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token operator">-</span><span class="token number">115.0</span><span class="token punctuation">,</span> <span class="token number">37.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">115.0</span><span class="token punctuation">,</span> <span class="token number">32.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">107.0</span><span class="token punctuation">,</span> <span class="token number">33.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">102.0</span><span class="token punctuation">,</span> <span class="token number">31.0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">102.0</span><span class="token punctuation">,</span> <span class="token number">35.0</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">material</span><span class="token operator">:</span> colorMaterial<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>

<span class="token comment">// 通过 timeline 和 clock 演示颜色变化</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>startTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>stopTime <span class="token operator">=</span> endTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> startTime<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>clockRange <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>ClockRange<span class="token punctuation">.</span><span class="token constant">LOOP_STOP</span> <span class="token comment">// 循环</span>
viewer<span class="token punctuation">.</span>clock<span class="token punctuation">.</span>multiplier <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 时间流速倍率</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="compositematerialproperty" tabindex="-1"><a class="header-anchor" href="#compositematerialproperty" aria-hidden="true">#</a> CompositeMaterialProperty</h4><p><code>CompositeMaterialProperty</code> 组合材质类型，用于设定各种材质在指定时间区间内的效果。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> compositeMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CompositeMaterialProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
compositeMaterial<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> startTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> midTime<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorMaterialProperty</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
compositeMaterial<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">start</span><span class="token operator">:</span> midTime<span class="token punctuation">,</span>
    <span class="token literal-property property">stop</span><span class="token operator">:</span> endTime<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ColorMaterialProperty</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="其它类型" tabindex="-1"><a class="header-anchor" href="#其它类型" aria-hidden="true">#</a> 其它类型</h3><p>说是其它类型，但都是基于 <code>ReferenceProperty</code> 和 <code>CallbackProperty</code> 俩种。</p><h4 id="referenceproperty" tabindex="-1"><a class="header-anchor" href="#referenceproperty" aria-hidden="true">#</a> ReferenceProperty</h4><p><code>ReferenceProperty</code> 是 Cesium 中用于引用其他实体属性的特殊属性类型。它允许一个实体的属性动态地引用另一个实体的属性，从而实现更复杂的关系和依赖。</p><p><strong>构造函数</strong>:</p><p><code>Cesium.ReferenceProperty(targetCollection, targetId, targetPropertyNames)</code></p><ul><li><code>targetCollection</code>: <code>EntityCollection</code> 类型，用于解析引用的实体集合。</li><li><code>targetId</code>: <code>string</code> 类型，被引用实体的 ID。</li><li><code>targetPropertyNames</code>: <code>Array&lt;string&gt;</code> 类型，目标实体上使用的属性名称数组。</li></ul><p><strong>使用场景</strong>:</p><ol><li>让一个实体的位置、方向等属性跟随另一个实体的属性变化;</li><li>在多个实体之间创建动态依赖关系。</li></ol><p><strong>使用方法</strong>:</p><ol><li>创建被引用的实体。</li><li>创建引用属性 (<code>ReferenceProperty</code>)。</li><li>将引用属性赋值给引用实体的属性。</li></ol><p>示例 1: 引用另一实体的位置。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 创建被引用的实体</span>
<span class="token keyword">const</span> referencedEntity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 创建引用属性</span>
<span class="token keyword">const</span> positionReference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ReferenceProperty</span><span class="token punctuation">(</span>
  viewer<span class="token punctuation">.</span>entities<span class="token punctuation">,</span>
  referencedEntity<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;position&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建引用实体并将引用属性赋值给 position 属性</span>
<span class="token keyword">const</span> referencingEntity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> positionReference<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例 2: 引用另一个实体的颜色。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 创建被引用的实体</span>
<span class="token keyword">const</span> referencedEntity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">75.0</span><span class="token punctuation">,</span> <span class="token number">40.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 创建引用属性</span>
<span class="token keyword">const</span> colorReference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>ReferenceProperty</span><span class="token punctuation">(</span>
  viewer<span class="token punctuation">.</span>entities<span class="token punctuation">,</span>
  referencedEntity<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;point&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;color&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建引用实体并将引用属性赋值给 point 的 color 属性</span>
<span class="token keyword">const</span> referencingEntity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">70.0</span><span class="token punctuation">,</span> <span class="token number">35.0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> colorReference<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>viewer<span class="token punctuation">.</span>entities<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="callbackproperty" tabindex="-1"><a class="header-anchor" href="#callbackproperty" aria-hidden="true">#</a> CallbackProperty</h4><p><code>CallbackProperty</code> 是 Cesium 中用于定义动态属性的工具。它允许你使用一个回调函数动态计算属性的值，这对于需要实时更新的属性特别有用，比如随时间变化的位置、颜色、大小等。</p><p><strong>构造函数</strong>:</p><p><code>Cesium.CallbackProperty(callback, isConstant)</code></p><ul><li><code>callback</code>: <code>Function</code> 类型，用于计算属性值的回调函数。 该回调函数可以传入俩个参数: <ul><li><code>time</code>：<code>JulianDate</code>类型，检索值的时间。</li><li><code>result</code>：可选，用于存储值的对象。如果省略，函数必须创建并返回一个新实例。</li></ul></li><li><code>isConstant</code>: <code>Boolean</code> 类型，指示属性值是否始终不变，默认为 <code>false</code>。</li></ul><p><strong>使用场景</strong>:</p><ol><li>动态计算属性值;</li><li>实现复杂的属性变化逻辑;</li><li>属性值依赖于外部状态或条件。</li></ol><p><strong>使用方法</strong>:</p><ol><li>定义回调函数：计算属性值的函数;</li><li>创建 <code>CallbackProperty</code> 实例：传入回调函数和一个标志参数;</li><li>将 <code>CallbackProperty</code> 赋值给实体的属性。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> viewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Viewer</span><span class="token punctuation">(</span><span class="token string">&#39;cesiumContainer&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> startTime <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> speed <span class="token operator">=</span> <span class="token number">100</span> <span class="token comment">// 米每秒</span>

<span class="token comment">// 定义回调函数</span>
<span class="token keyword">function</span> <span class="token function">computePosition</span><span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> seconds <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">secondsDifference</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> startTime<span class="token punctuation">)</span>
  <span class="token keyword">const</span> position <span class="token operator">=</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">fromDegrees</span><span class="token punctuation">(</span>
    <span class="token operator">-</span><span class="token number">75.0</span> <span class="token operator">+</span> seconds <span class="token operator">*</span> <span class="token number">0.01</span><span class="token punctuation">,</span>
    <span class="token number">40.0</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">sin</span><span class="token punctuation">(</span>seconds<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">0.1</span>
  <span class="token punctuation">)</span>
  <span class="token keyword">return</span> Cesium<span class="token punctuation">.</span>Cartesian3<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 创建 CallbackProperty 实例</span>
<span class="token keyword">const</span> positionProperty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CallbackProperty</span><span class="token punctuation">(</span>computePosition<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>

<span class="token comment">// 创建实体并将 CallbackProperty 赋值给 position 属性</span>
<span class="token keyword">const</span> entity <span class="token operator">=</span> viewer<span class="token punctuation">.</span>entities<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">position</span><span class="token operator">:</span> positionProperty<span class="token punctuation">,</span>
  <span class="token literal-property property">point</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">pixelSize</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> Cesium<span class="token punctuation">.</span>Color<span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 设置视图到实体</span>
viewer<span class="token punctuation">.</span><span class="token function">zoomTo</span><span class="token punctuation">(</span>entity<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,35);function g(h,T){const p=m("ExternalLinkIcon");return v(),b("div",null,[y,s("p",null,[n("在总结它们之间的区别之前，可以先梳理一下，"),s("a",C,[n("Property"),t(p)]),n(" 类型的公共属性和方法。")]),w,s("p",null,[n("从使用上来看同基本类型等都类似，但是由于材质的类型较多，本文并不会对所有的材质类型进行介绍，挑选几种旨在梳理总结其用法特点。具体可见官网 "),s("a",f,[n("MaterialProperty API"),t(p)]),n("。")]),P])}const I=e(d,[["render",g],["__file","Cesium05.html.vue"]]);export{I as default};
