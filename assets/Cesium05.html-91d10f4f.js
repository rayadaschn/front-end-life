import{_ as t,Z as p,a0 as o,F as c,a1 as l,X as i,Y as r,$ as u}from"./framework-5dd7fabc.js";const d={},s=p,n=o,k=c,m=l,a=u,v=i,y=r,b=a('<p>在此前系列中，笔者梳理了 Cesium 的基本使用方法，但是为了更进阶了解 Cesium，我们需要了解 Cesium 的核心机制，其中之一就是 Property 属性机制。</p><figure><img src="https://cdn.jsdelivr.net/gh/rayadaschn/blogImage@master/img/Property 类型.jpg" alt="Property 类型" tabindex="0" loading="lazy"><figcaption>Property 类型</figcaption></figure><h2 id="区分-entity-和-property" tabindex="-1"><a class="header-anchor" href="#区分-entity-和-property" aria-hidden="true">#</a> 区分 Entity 和 Property</h2><p>此前，简单的介绍过 <code>Entity</code> 和 <code>Property</code> 的区别。</p><p><code>Entity</code> 是 Cesium 中最基础的类，它代表了一个三维对象，例如一个球体、一个平面、一个模型等。<code>Entity</code> 是一个抽象的概念，它不包含任何具体的几何信息，只包含一些属性，例如位置、颜色、大小等。</p><p><code>Property</code> 用于表示属性的值可以随时间变化。它通常用于描述 <code>Entity</code> 的动态属性，如位置、颜色、方向等。</p><p>总体来说，<code>Entity</code> 是表示场景中对象的基本构建块，包含多个静态或动态属性。<code>Property</code> 是用于定义这些属性随时间变化的接口和机制，使得 <code>Entity</code> 的行为可以根据时间进行动态变化。</p><h2 id="property-的分类" tabindex="-1"><a class="header-anchor" href="#property-的分类" aria-hidden="true">#</a> Property 的分类</h2><p>如开篇图片总结一致，在 Cesium 中 Property 基本上可以分为四类：基本类型、PositionProperty 坐标类型、MaterialProperty 材质类型和其它类型。</p>',9),C={href:"https://cesium.com/learn/ion-sdk/ref-doc/Property.html?classFilter=Property",target:"_blank",rel:"noopener noreferrer"},h=a(`<p><strong>公共只读属性</strong>:</p><ul><li><code>definitionChanged</code>：当属性的定义发生变化时触发的<strong>事件</strong>。</li><li><code>isConstant</code>：一个布尔值，指示属性是否为常量，用来判断该属性是否会随时间变化。Cesium 会依据该变量来判断物体是否需要更新。</li></ul><p><strong>公共方法</strong>：</p><ul><li><code>equals(other)</code>：比较当前属性与提供的属性是否相等。</li><li><code>getValue(time, result)</code>：获取指定时间的属性值。<code>time</code>参数是一个<code>JulianDate</code>对象，表示时间；<code>result</code>是一个<strong>可选参数</strong>，用于存储返回的值。</li></ul><h3 id="基本类型" tabindex="-1"><a class="header-anchor" href="#基本类型" aria-hidden="true">#</a> 基本类型</h3><p>基本类型包括 <code>ConstantProperty</code>、<code>SampledProperty</code>、<code>TimeIntervalCollectionProperty</code> 和 <code>CompositeProperty</code>。</p><ul><li><code>ConstantProperty</code>：表示一个恒定的属性值，即该属性的值在所有时间点上都相同。</li><li><code>SampledProperty</code>：表示一个随时间变化的属性值，即该属性的值在多个时间点上进行采样。</li><li><code>TimeIntervalCollectionProperty</code>：表示一个随时间变化的属性值，但是每个时间段的属性值可以不同。</li><li><code>CompositeProperty</code>：表示一个组合属性，即该属性的值由多个子属性组合而成。</li></ul><h4 id="constantproperty" tabindex="-1"><a class="header-anchor" href="#constantproperty" aria-hidden="true">#</a> ConstantProperty</h4><p><code>ConstantProperty</code> 是一个常量属性，它的值在所有时间点上都相同。它通常用于表示静态属性，例如物体的颜色、大小等。</p><p>构造函数: <code>new Cesium.ConstantProperty(value)</code>。<code>value</code>: 属性值，是可选参数。</p><p>虽然说是不可变，实际上是不随时间发生变化，<code>ConstantProperty</code> 是具有<code>setValue(value)</code>方法的，依据该方法可以修改物体的值。</p><h4 id="sampledproperty" tabindex="-1"><a class="header-anchor" href="#sampledproperty" aria-hidden="true">#</a> SampledProperty</h4><p><code>SampledProperty</code> 是一个采样属性，它的值在多个时间点上进行采样。它通常用于表示随时间变化的属性，例如物体的位置、方向等。</p><p>构造函数: <code>new Cesium.SampledProperty(type, derivativeTypes)</code>。<code>type</code> 是属性类型，<code>derivativeTypes</code> 是可选数组，表示样本将包含指定类型的导数信息。</p><p>创建并使用线性插值的 <code>Cartesian2</code> 属性：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> property <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>SampledProperty</span><span class="token punctuation">(</span>Cesium<span class="token punctuation">.</span>Cartesian2<span class="token punctuation">)</span>

property<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token string">&#39;2012-08-01T00:00:00.00Z&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
property<span class="token punctuation">.</span><span class="token function">addSample</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token string">&#39;2012-08-02T00:00:00.00Z&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> property<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>JulianDate<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token string">&#39;2012-08-01T12:00:00.00Z&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="timeintervalcollectionproperty" tabindex="-1"><a class="header-anchor" href="#timeintervalcollectionproperty" aria-hidden="true">#</a> TimeIntervalCollectionProperty</h4><p><code>TimeIntervalCollectionProperty</code> 是一个时间间隔集合属性，它的值在多个时间间隔内可以不同。它通常用于表示随时间间断变化的属性，例如物体的位置、方向等。没有 Sampled 那样插值结果丝滑。</p><p>多了一个 <code>intervals</code> 只读属性，并以此定义间断收集。</p><p>创建一个 <code>Cartesian2</code> 间隔属性，包含 2012 年 8 月 1 日的数据，并每 6 小时使用不同的值。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> composite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>TimeIntervalCollectionProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T00:00:00.00Z/2012-08-01T06:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">2.0</span><span class="token punctuation">,</span> <span class="token number">3.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T06:00:00.00Z/2012-08-01T12:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">12.0</span><span class="token punctuation">,</span> <span class="token number">2.7</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T12:00:00.00Z/2012-08-01T18:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">5.0</span><span class="token punctuation">,</span> <span class="token number">12.4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T18:00:00.00Z/2012-08-02T00:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>Cartesian2</span><span class="token punctuation">(</span><span class="token number">85.0</span><span class="token punctuation">,</span> <span class="token number">4.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="compositeproperty" tabindex="-1"><a class="header-anchor" href="#compositeproperty" aria-hidden="true">#</a> CompositeProperty</h4><p><code>CompositeProperty</code> 是一个组合属性，它的值由多个子属性组合而成。它允许用户定义一个由 <code>TimeIntervalCollection</code> 管理的属性集合。每个时间间隔内的 <code>data</code> 属性是另一个 <code>Property</code> 实例，这个实例会在给定时间被评估。</p><p><code>CompositeProperty</code> 类通过 <code>new Cesium.CompositeProperty()</code> 构造函数创建。 它使用 <code>TimeIntervalCollection</code> 来定义属性，每个时间间隔内的数据属性是另一个 <code>Property</code> 实例。</p><p>假设现在有两个属性：<code>constantProperty</code> 和 <code>sampledProperty</code>，使用 <code>CompositeProperty</code> 的 <code>addInterval</code> 方法添加时间间隔，例如。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> composite <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cesium<span class="token punctuation">.</span>CompositeProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T00:00:00.00Z/2012-08-01T12:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> constantProperty<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
composite<span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">addInterval</span><span class="token punctuation">(</span>
  Cesium<span class="token punctuation">.</span>TimeInterval<span class="token punctuation">.</span><span class="token function">fromIso8601</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">iso8601</span><span class="token operator">:</span> <span class="token string">&#39;2012-08-01T12:00:00.00Z/2012-08-02T00:00:00.00Z&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStartIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isStopIncluded</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> sampledProperty<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,26);function f(P,g){const e=k("ExternalLinkIcon");return v(),y("div",null,[b,s("p",null,[n("在总结它们之间的区别之前，可以先梳理一下，"),s("a",C,[n("Property"),m(e)]),n(" 类型的公共属性和方法。")]),h])}const T=t(d,[["render",f],["__file","Cesium05.html.vue"]]);export{T as default};
