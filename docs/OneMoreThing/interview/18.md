---
title: Interview -- åŸºç¡€æ‰‹å†™é¢˜
icon: note
date: 2023-10-26
category:
  - anonymous
tag:
  - note
star: false
# sticky: true
sticky: false
---

- [æ•°ç»„å»é‡æ–¹æ³•æ±‡æ€»](#æ•°ç»„å»é‡æ–¹æ³•æ±‡æ€»)
- [å¯¹è±¡ç›¸ç­‰åˆ¤æ–­](#å¯¹è±¡ç›¸ç­‰åˆ¤æ–­)
- [æ‰‹å†™ Array çš„ filterã€mapã€someã€every å’Œ reduce æ–¹æ³•](#æ‰‹å†™-array-çš„-filtermapsomeevery-å’Œ-reduce-æ–¹æ³•)
  - [æ‰‹å†™ filter](#æ‰‹å†™-filter)
  - [æ‰‹å†™ map](#æ‰‹å†™-map)
  - [æ‰‹å†™ some](#æ‰‹å†™-some)
  - [æ‰‹å†™ every](#æ‰‹å†™-every)
  - [æ‰‹å†™ reduce](#æ‰‹å†™-reduce)
- [å®ç°ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¼•æ“](#å®ç°ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¼•æ“)
- [å¯¹è±¡æ‰å¹³åŒ–](#å¯¹è±¡æ‰å¹³åŒ–)
- [æ ¹æ®è¡¨è¾¾å¼è®¡ç®—å­—æ¯æ•°](#æ ¹æ®è¡¨è¾¾å¼è®¡ç®—å­—æ¯æ•°)

## æ•°ç»„å»é‡æ–¹æ³•æ±‡æ€»

1. åˆ©ç”¨ `Set` å»é‡
2. åˆ©ç”¨ `for` å¾ªç¯éå†ï¼Œ`includes` ï¼ˆèƒ½è¯†åˆ« NANï¼‰ã€`indexOf`ï¼ˆä¸èƒ½è¯†åˆ« NANï¼‰

```js
// 1. set å»é‡
function unique(arr) {
  // æˆ–è€… return Array.from(new Set(arr))
  return [...new Set(arr)]
}

// 2. for å¾ªç¯éå†
function unique2(arr) {
  if (!Array.isArray(arr)) return
  const resArr = []
  for (const item of arr) {
    if (!resArr.includes(item)) {
      resArr.push(item)
    }
  }
  return resArr
}
```

## å¯¹è±¡ç›¸ç­‰åˆ¤æ–­

```js
function deepEqual(obj1, obj2) {
  if (obj1 === obj2) return true
  if (
    typeof obj1 !== 'object' ||
    obj1 === null ||
    typeof obj2 !== 'object' ||
    obj2 === null
  ) {
    return false
  }

  const keys1 = Object.keys(obj1)
  const keys2 = Object.keys(obj2)

  if (keys1.length !== keys2.length) return false

  for (const key of keys1) {
    if (!keys2.includes(key) || !deepEqual(obj1[key], obj2[key])) return false
  }
}
```

## æ‰‹å†™ Array çš„ filterã€mapã€someã€every å’Œ reduce æ–¹æ³•

### æ‰‹å†™ filter

```js
Array.prototype.myFilter = function (callback) {
  const len = this.length
  const res = []
  for (let i = 0; i < len; i++) {
    const item = this[i] // å½“å‰é¡¹
    if (callback(item)) {
      res.push(item)
    }
  }
  return res
}

const words = ['spray', 'elite', 'exuberant', 'destruction', 'present']
const result = words.myFilter((word) => word.length > 6)
console.log('ğŸš€ ~ myFilter:', result)
```

### æ‰‹å†™ map

```js
Array.prototype.myMap = function (callback) {
  const len = this.length
  const res = []
  for (let i = 0; i < len; i++) {
    const item = this[i]
    res.push(callback(item))
  }
  return res
}

const array = [1, 4, 9, 16]
const map1 = array.myMap((x) => x * 2)
console.log('ğŸš€ ~ myMap:', map1)
```

### æ‰‹å†™ some

```js
Array.prototype.mySome = function (callback) {
  const len = this.length
  for (let i = 0; i < len; i++) {
    const item = this[i]
    if (callback(item)) {
      return true
    }
  }
  return false
}

const array = [1, 2, 3, 4, 5]
const even = (element) => element % 2 === 0
console.log('ğŸš€ ~ mySome:', array.mySome(even))
```

### æ‰‹å†™ every

```js
Array.prototype.myEvery = function (callback) {
  const len = this.length
  for (let i = 0; i < len; i++) {
    const item = this[i]
    if (!callback(item)) {
      return false
    }
  }
  return true
}

const isBelowThreshold = (currentValue) => currentValue < 40
const array = [1, 30, 39, 29, 10, 13]

console.log('ğŸš€ ~ myEvery:', array.every(isBelowThreshold))
```

### æ‰‹å†™ reduce

```js
Array.prototype.myReduce = function (callback, pre) {
  const len = this.length
  for (let i = 0; i < len; i++) {
    if (pre !== undefined) {
      pre = callback(pre, this[i], i, this)
    } else {
      pre = callback(this[i], this[i + 1], i, this)
      i++ // æå‰ä¸€é¡¹ç»“æŸ
    }
  }
  return pre
}

const array = [1, 2, 3, 4]

// 0 + 1 + 2 + 3 + 4
const initialValue = 0
const sumWithInitial = array.reduce(
  (accumulator, currentValue) => accumulator + currentValue,
  initialValue
)
console.log('ğŸš€ ~ myReduce:', sumWithInitial)
```

## å®ç°ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¼•æ“

```js
const tpl = template('<p>hey there {{ name }} {{ name }}</p>')
const res = tpl({ name: 'Neo' })
console.log('ğŸš€ ~ template:', res)

function template(str) {
  return function (obj) {
    for (let key in obj) {
      const val = obj[key]
      const reg = new RegExp(`{{\\s+${key}\\s+}}`, 'g')
      str = str.replace(reg, val)
    }
    return str
  }
}
```

## å¯¹è±¡æ‰å¹³åŒ–

```js
/**
 * å¯¹è±¡æ‰å¹³åŒ–
 * è¯´æ˜ï¼šè¯·å®ç° flatten(input) å‡½æ•°ï¼Œinput ä¸ºä¸€ä¸ª javascript å¯¹è±¡ï¼ˆObject æˆ–è€… Arrayï¼‰ï¼Œè¿”å›å€¼ä¸ºæ‰å¹³åŒ–åçš„ç»“æœã€‚
 * ç¤ºä¾‹ï¼š
 *   var input = {
 *     a: 1,
 *     b: [ 1, 2, { c: true }, [ 3 ] ],
 *     d: { e: 2, f: 3 },
 *     g: null,
 *   }
 *   var output = flatten(input);
 *   outputå¦‚ä¸‹
 *   {
 *     "a": 1,
 *     "b[0]": 1,
 *     "b[1]": 2,
 *     "b[2].c": true,
 *     "b[3][0]": 3,
 *     "d.e": 2,
 *     "d.f": 3,
 *     // "g": null,  å€¼ä¸ºnullæˆ–è€…undefinedï¼Œä¸¢å¼ƒ
 *  }
 */
function flatten(obj) {
  const res = {}
  const recur = (target, oldKey) => {
    for (const key in target) {
      let newKey = ''
      if (oldKey) {
        // åŒºåˆ†æ˜¯å¦æ˜¯åˆæ¬¡é€’å½’
        if (Array.isArray(target)) {
          newKey = `${oldKey}[${key}]`
        } else {
          newKey = `${oldKey}.${key}`
        }
      } else {
        if (Array.isArray(target)) {
          newKey = `[${key}]`
        } else {
          newKey = key
        }
      }

      if (target[key] != null) {
        // å‰”é™¤éç©ºç»“æœ
        if (typeof target[key] === 'object') {
          recur(target[key], newKey) // é€’å½’æ‰å¹³å€¼
        } else {
          res[newKey] = target[key] // æ·»åŠ ç»“æœ
        }
      }
    }
  }

  recur(obj, '')

  // è¿”å›æ‰å¹³ç»“æœ
  return res
}

const inputObj = {
  a: 1,
  b: [1, 2, { c: true }, [3]],
  d: { e: 2, f: 3 },
  g: null,
}
console.log('ğŸš€ ~ flatten:', flatten(inputObj))
```

## æ ¹æ®è¡¨è¾¾å¼è®¡ç®—å­—æ¯æ•°

```js
/**
 * æ ¹æ®è¡¨è¾¾å¼è®¡ç®—å­—æ¯æ•°
 * è¯´æ˜ï¼š
 *   ç»™å®šä¸€ä¸ªæè¿°å­—æ¯æ•°é‡çš„è¡¨è¾¾å¼ï¼Œè®¡ç®—è¡¨è¾¾å¼é‡Œçš„æ¯ä¸ªå­—æ¯å®é™…æ•°é‡
 *   è¡¨è¾¾å¼æ ¼å¼ï¼š
 *     å­—æ¯ç´§è·Ÿè¡¨ç¤ºæ¬¡æ•°çš„æ•°å­—ï¼Œå¦‚ A2B3
 *     æ‹¬å·å¯å°†è¡¨è¾¾å¼å±€éƒ¨åˆ†ç»„åè·Ÿä¸Šæ•°å­—ï¼Œ(A2)2B
 *     æ•°å­—ä¸º1æ—¶å¯ç¼ºçœï¼Œå¦‚ AB3ã€‚
 * ç¤ºä¾‹ï¼š
 *   countOfLetters('A2B3'); // { A: 2, B: 3 }
 *   countOfLetters('A(A3B)2'); // { A: 7, B: 2 }
 *   countOfLetters('C4(A(A3B)2)2'); // { A: 14, B: 4, C: 4 }
 */

function countOfLetters(str) {
  let i = 0
  const strLen = str.length
  const strMap = [new Map()] // æ ˆ

  /** è·å–å½“å‰å­—æ¯åç»­çš„æ•°å­— */
  const getNum = () => {
    if (i === strLen || isNaN(Number(str[i]))) {
      return 1 // åˆ°æœ«å°¾äº† || ä¸æ˜¯æ•°å­—ï¼Œè§†ä½œ 1
    }
    let num = 0
    while (i < strLen && !isNaN(Number(str[i]))) {
      num = num * 10 + Number(str[i]) // æ‰«ææ•°å­—
      i++
    }
    return num
  }

  while (i < strLen) {
    const curStr = str[i]
    if (curStr === '(') {
      i++
      strMap.unshift(new Map()) // å‹æ ˆ
    } else if (curStr === ')') {
      i++
      const beforeMap = strMap.shift() // é€€æ ˆ
      const newMap = strMap[0]
      const num = getNum() // è·å–æ‹¬å·åçš„æ•°å­—
      // åˆå¹¶å¯¹è±¡
      for (const [beforeStr, beforeNum] of beforeMap.entries()) {
        newMap.set(beforeStr, (newMap.get(beforeStr) || 0) + beforeNum * num)
      }
    } else {
      // å½“å‰ä¸ºå­—æ¯
      const mapStr = curStr // å½“å‰å­—æ¯
      i++
      const curNum = getNum() // è·å–å­—æ¯æ•°é‡
      const curMap = strMap[0]
      curMap.set(mapStr, (curMap.get(mapStr) || 0) + curNum) // ç»Ÿè®¡æ•°é‡
    }
  }

  const resMap = strMap[0]
  return Object.fromEntries(resMap.entries())
}

// æµ‹è¯•
console.log(countOfLetters('A2B3')) // { A: 2, B: 3 }
console.log(countOfLetters('A(A3B)2')) // { A: 7, B: 2 }
console.log(countOfLetters('C4(A(A3B)2)2')) // { A: 14, B: 4, C: 4 }
```
