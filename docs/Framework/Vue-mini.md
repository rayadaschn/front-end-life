---
title: 手写 Vue3
icon: vue
date: 2023-11-20
category:
  - 框架
tag:
  - Vue
star: true
sticky: false
---

> 尤雨溪：框架的设计过程其实是一个不断取舍的过程。

## 理解命令式和声明式

"命令式"（Imperative）和"声明式"（Declarative）是两种编程范式，用来描述编程语言或编程风格的不同方式。

1. **命令式（Imperative）**：

   - **关注步骤和过程：** 命令式编程关注如何完成一个任务，通过指定每个步骤来达到目标。
   - **具体的控制流：** 开发者需要详细说明程序的控制流程，包括循环、条件语句等。
   - **修改状态：** 程序通过改变状态来实现目标，通常使用变量来存储和修改状态。
   - **示例：** 常见的命令式编程语言包括 C、C++、Java。例如，下面是一个简单的命令式编程的示例，计算阶乘的函数：

   ```js
   // 计算阶乘的命令式函数

     function factorial(n) {
     let result = 1;
     for (let i = 1; i <= n; ++i) {
     result \*= i;
     }
     return result;
     }

     console.log(factorial(5)); // 输出: 120
   ```

2. **声明式（Declarative）**：

   - **关注结果而非步骤：** 声明式编程关注定义要达到的目标，而不是详细说明如何实现这个目标。
   - **抽象控制流：** 具体的控制流程由编程语言或框架隐式处理，而不需要开发者明确指定。
   - **不修改状态：** 避免直接修改状态，而是通过声明式的方式描述所需的状态。
   - **示例：** 常见的声明式编程语言包括 SQL、HTML、React 中的 JSX。以下是一个声明式的 React 组件示例：

     ```jsx
     function Greeting({ name }) {
       return <p>Hello, {name}!</p>
     }
     ```

总的来说，声明式代码更利于阅读，也更利于维护，但是性能弱于命令式（步骤更多）。

## 区分运行时和编译时

Vue 是一个运行时 ➕ 编译时的框架。

通过 compiler 解析 html 模版，生成 render 函数，再通过 runtime 解析 render，从而挂载真实 DOM。
